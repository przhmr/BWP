import{A as he,P as Or,d as xa,I as Ra,E as $a,r as p,M as Ba,G as ja,c as _e,u as Ma,o as qa,x as Rt,aa as Wa,J as mo,g as Ga,a as h,b as Xe,e as et,f as r,m as tt,l as sr,i as Ee,n as Ft,F as Ha,k as Ka,h as S,S as Ja,q as U,j as Qa,s as z}from"./entry.819ce933.js";import{_ as Ya}from"./TextElement.vue.97454692.js";import{_ as Za}from"./TextBoxListElement.vue.fc6a6601.js";import{_ as Xa}from"./TextAreaElement.vue.f7b081b3.js";import{_ as en}from"./HtmlInput.vue.5c04a560.js";import{_ as tn}from"./OptionElement.vue.bbabf351.js";/* empty css                            */import{b as Vr,u as on,_ as rn}from"./authorizeNet.cf3ec58e.js";import{u as an,f as St,v as ur,b as po,i as nn,d as ln,e as sn,h as un}from"./index.f1fa0ff4.js";/* empty css            */import{am as dn,an as dr,ao as Dr,H as cn,ak as fn,aj as mn,T as go,j as ot,u as pn,E as yo,a2 as vo,J as yn,ap as vn,V as _n,a5 as hn,U as gn,W as bn,aa as cr,ab as Cn,ac as In,ae as fr,w as $t,ad as mr,af as pr,z as Bt,I as yr,ag as vr,a7 as B,aq as Me,a8 as _r,a9 as Fn,ah as Sn,S as _o,ar as ho}from"./constants.8e39bf94.js";import{i as En,f as hr}from"./funnel_event_helper.3fa06503.js";import{l as wn,a as Pn,L as Tn,C as kn}from"./advancedFormat.5188a9ac.js";import{a as An}from"./currency_helper.0e2fcc1c.js";import{_ as On}from"./MoonLoader.vue.151c5415.js";import{o as Vn,q as gr,r as Dn,g as br,t as Ln}from"./calendar_helper.0d199cc9.js";import{e as Un,g as Lr,s as zn,a as Nn,b as xn,U as Cr,c as bo,S as Rn,d as $n}from"./_Uint8Array.e77edc6f.js";import{c as Ur,i as Bn,d as jn,o as Mn,k as zr,n as Mt,b as Nr,e as qn}from"./keys.83f010cc.js";import{i as Co}from"./isObject.32699ff3.js";var Ir=Object.create,Wn=function(){function t(){}return function(i){if(!Co(i))return{};if(Ir)return Ir(i);t.prototype=i;var m=new t;return t.prototype=void 0,m}}();const Gn=Wn;function Hn(t,i){var m=-1,T=t.length;for(i||(i=Array(T));++m<T;)i[m]=t[m];return i}var Kn=Object.prototype,Jn=Kn.hasOwnProperty;function xr(t,i,m){var T=t[i];(!(Jn.call(t,i)&&Un(T,m))||m===void 0&&!(i in t))&&Vr(t,i,m)}function qt(t,i,m,T){var a=!m;m||(m={});for(var W=-1,w=i.length;++W<w;){var F=i[W],se=T?T(m[F],t[F],F,m,t):void 0;se===void 0&&(se=t[F]),a?Vr(m,F,se):xr(m,F,se)}return m}function Qn(t){var i=[];if(t!=null)for(var m in Object(t))i.push(m);return i}var Yn=Object.prototype,Zn=Yn.hasOwnProperty;function Xn(t){if(!Co(t))return Qn(t);var i=Ur(t),m=[];for(var T in t)T=="constructor"&&(i||!Zn.call(t,T))||m.push(T);return m}function Io(t){return Bn(t)?jn(t,!0):Xn(t)}var el=Mn(Object.getPrototypeOf,Object);const Rr=el;function tl(t,i){return t&&qt(i,zr(i),t)}function ol(t,i){return t&&qt(i,Io(i),t)}var $r=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fr=$r&&typeof module=="object"&&module&&!module.nodeType&&module,rl=Fr&&Fr.exports===$r,Sr=rl?dn.Buffer:void 0,Er=Sr?Sr.allocUnsafe:void 0;function al(t,i){if(i)return t.slice();var m=t.length,T=Er?Er(m):new t.constructor(m);return t.copy(T),T}function nl(t,i){return qt(t,Lr(t),i)}var ll=Object.getOwnPropertySymbols,il=ll?function(t){for(var i=[];t;)Nn(i,Lr(t)),t=Rr(t);return i}:zn;const Br=il;function sl(t,i){return qt(t,Br(t),i)}function ul(t){return xn(t,Io,Br)}var dl=Object.prototype,cl=dl.hasOwnProperty;function fl(t){var i=t.length,m=new t.constructor(i);return i&&typeof t[0]=="string"&&cl.call(t,"index")&&(m.index=t.index,m.input=t.input),m}function Fo(t){var i=new t.constructor(t.byteLength);return new Cr(i).set(new Cr(t)),i}function ml(t,i){var m=i?Fo(t.buffer):t.buffer;return new t.constructor(m,t.byteOffset,t.byteLength)}var pl=/\w*$/;function yl(t){var i=new t.constructor(t.source,pl.exec(t));return i.lastIndex=t.lastIndex,i}var wr=dr?dr.prototype:void 0,Pr=wr?wr.valueOf:void 0;function vl(t){return Pr?Object(Pr.call(t)):{}}function _l(t,i){var m=i?Fo(t.buffer):t.buffer;return new t.constructor(m,t.byteOffset,t.length)}var hl="[object Boolean]",gl="[object Date]",bl="[object Map]",Cl="[object Number]",Il="[object RegExp]",Fl="[object Set]",Sl="[object String]",El="[object Symbol]",wl="[object ArrayBuffer]",Pl="[object DataView]",Tl="[object Float32Array]",kl="[object Float64Array]",Al="[object Int8Array]",Ol="[object Int16Array]",Vl="[object Int32Array]",Dl="[object Uint8Array]",Ll="[object Uint8ClampedArray]",Ul="[object Uint16Array]",zl="[object Uint32Array]";function Nl(t,i,m){var T=t.constructor;switch(i){case wl:return Fo(t);case hl:case gl:return new T(+t);case Pl:return ml(t,m);case Tl:case kl:case Al:case Ol:case Vl:case Dl:case Ll:case Ul:case zl:return _l(t,m);case bl:return new T;case Cl:case Sl:return new T(t);case Il:return yl(t);case Fl:return new T;case El:return vl(t)}}function xl(t){return typeof t.constructor=="function"&&!Ur(t)?Gn(Rr(t)):{}}var Rl="[object Map]";function $l(t){return Dr(t)&&bo(t)==Rl}var Tr=Mt&&Mt.isMap,Bl=Tr?Nr(Tr):$l;const jl=Bl;var Ml="[object Set]";function ql(t){return Dr(t)&&bo(t)==Ml}var kr=Mt&&Mt.isSet,Wl=kr?Nr(kr):ql;const Gl=Wl;var Hl=1,Kl=2,Jl=4,jr="[object Arguments]",Ql="[object Array]",Yl="[object Boolean]",Zl="[object Date]",Xl="[object Error]",Mr="[object Function]",ei="[object GeneratorFunction]",ti="[object Map]",oi="[object Number]",qr="[object Object]",ri="[object RegExp]",ai="[object Set]",ni="[object String]",li="[object Symbol]",ii="[object WeakMap]",si="[object ArrayBuffer]",ui="[object DataView]",di="[object Float32Array]",ci="[object Float64Array]",fi="[object Int8Array]",mi="[object Int16Array]",pi="[object Int32Array]",yi="[object Uint8Array]",vi="[object Uint8ClampedArray]",_i="[object Uint16Array]",hi="[object Uint32Array]",L={};L[jr]=L[Ql]=L[si]=L[ui]=L[Yl]=L[Zl]=L[di]=L[ci]=L[fi]=L[mi]=L[pi]=L[ti]=L[oi]=L[qr]=L[ri]=L[ai]=L[ni]=L[li]=L[yi]=L[vi]=L[_i]=L[hi]=!0;L[Xl]=L[Mr]=L[ii]=!1;function jt(t,i,m,T,a,W){var w,F=i&Hl,se=i&Kl,qe=i&Jl;if(m&&(w=a?m(t,T,a,W):m(t)),w!==void 0)return w;if(!Co(t))return t;var We=cn(t);if(We){if(w=fl(t),!F)return Hn(t,w)}else{var ge=bo(t),Re=ge==Mr||ge==ei;if(qn(t))return al(t,F);if(ge==qr||ge==jr||Re&&!a){if(w=se||Re?{}:xl(t),!F)return se?sl(t,ol(w,t)):nl(t,tl(w,t))}else{if(!L[ge])return a?t:{};w=Nl(t,ge,F)}}W||(W=new Rn);var $e=W.get(t);if($e)return $e;W.set(t,w),Gl(t)?t.forEach(function(N){w.add(jt(N,i,m,N,t,W))}):jl(t)&&t.forEach(function(N,me){w.set(me,jt(N,i,m,me,t,W))});var v=qe?se?ul:$n:se?Io:zr,Be=We?void 0:v(t);return Vn(Be||t,function(N,me){Be&&(me=N,N=t[me]),xr(w,me,jt(N,i,m,me,t,W))}),w}var gi=1,bi=4;function Ar(t){return jt(t,gi|bi)}const Ci=(t,i,m)=>{switch(t){case"isEqualTo":return i==m;case"isNotEqualTo":return i!=m;case"contains":return i==null?void 0:i.includes(m);case"startsWith":return i==null?void 0:i.startsWith(m);case"endsWith":return i==null?void 0:i.endsWith(m);case"isEmpty":return!i;case"isFilled":return i;case"before":return new Date(i)<new Date(m);case"after":return new Date(i)>new Date(m);case"greaterThan":return parseFloat(i)>parseFloat(m);case"lessThan":return parseFloat(i)<parseFloat(m);default:return console.warn(`Unknown selected operation: ${t}`),!1}},bs=async(t,i,m,T,a,W,w,F,se,qe,We,ge)=>{var Re,$e,v,Be;try{let N=localStorage.getItem("_ud");N&&(N=JSON.parse(N));const me=he("am_id").value,Et=he("am_fingerprint").value,rt=w.funnelName||"funnel",{funnelPageId:j,funnelId:Wt,stepId:wt}=w;i||(i=window.location.hostname,m=window.location.pathname);const Pt={altId:T,altType:"location",contactId:t,source:{type:fn.FORM,id:a,name:W,meta:{funnelId:Wt,funnelName:rt,stepId:wt,pageId:j,domain:i,pageUrl:m,affiliateManager:{id:me,fingerprint:Et}}},products:F.map(V=>({id:V.id,qty:V.qty})),fingerprint:se,couponSessionId:We,couponCode:ge,trackingId:mn(),traceId:N==null?void 0:N.traceId};qe&&(Pt.captchaToken=qe);const Tt=await go.createOrder(Pt);if(!((Re=Tt.order)==null?void 0:Re._id))throw new Error("Something went wrong while creating order. Please try again later.");return Tt}catch(N){return console.error(N),{error:!0,message:(v=($e=N==null?void 0:N.response)==null?void 0:$e._data)==null?void 0:v.message,status:(Be=N==null?void 0:N.response)==null?void 0:Be.status}}},Cs=async(t,i,m,T)=>{try{const a={altId:t,altType:"location",source:{type:"form",id:i},products:m.map(w=>({id:w.id,qty:w.qty})),couponCode:T};return await go.getAmountSummary(a)}catch{throw new Error("Something went wrong while creating order. Please try again later.")}};var we=(t=>(t.PRODUCT="product",t.DONATION="donation",t))(we||{});const Ii=()=>({channel:"APP",source:"WEB_USER",version:"2021-04-15"}),Fi=t=>{const i=Or();return $fetch.create({baseURL:(t==null?void 0:t.host)||i.public.REST_API_URLS,headers:{"x-parent-trace-context":(t==null?void 0:t.headers.traceId)||"",...Ii()}})},Si={patchSubmission:t=>Fi()("/forms/submission",{body:t,method:"PATCH"})},Ei=U(()=>z(()=>import("./HLImage.bfafd9ef.js"),[],import.meta.url).then(t=>t.default||t)),wi=U(()=>z(()=>import("./PhoneElement.a2ff77bc.js"),["./TextElement.0b941f97.css"],import.meta.url).then(t=>t.default||t)),Pi=U(()=>z(()=>import("./NumberElement.7b5fff5f.js"),["./TextBoxListElement.b602ad61.css"],import.meta.url).then(t=>t.default||t)),Ti=U(()=>z(()=>import("./EmailElement.41161f81.js"),["./EmailElement.029bb7ff.css"],import.meta.url).then(t=>t.default||t)),ki=U(()=>z(()=>import("./HeadingElement.b6fc7b80.js"),[],import.meta.url).then(t=>t.default||t)),Ai=U(()=>z(()=>import("./MutlipleMeetingPicker.0d4a5fe1.js"),["./MutlipleMeetingPicker.d2405748.css"],import.meta.url).then(t=>t.default||t)),Oi=U(()=>z(()=>import("./ImageElement.2631a9c1.js"),[],import.meta.url).then(t=>t.default||t)),Vi=U(()=>z(()=>import("./CaptchaElement.980ed12c.js"),["./CaptchaElement.82e40e45.css"],import.meta.url).then(t=>t.default||t)),Di=U(()=>z(()=>import("./MonetaryElement.a70d5def.js"),["./TextBoxListElement.b602ad61.css"],import.meta.url).then(t=>t.default||t)),Li=U(()=>z(()=>import("./CheckBoxElement.ec088185.js"),["./CheckBoxElement.cbef37c2.css"],import.meta.url).then(t=>t.default||t)),Ui=U(()=>z(()=>import("./TermsAndConditionsElement.7dcdfdda.js"),["./TermsAndConditionsElement.f4c1fd12.css"],import.meta.url).then(t=>t.default||t)),zi=U(()=>z(()=>import("./RadioOptionElement.3824aa20.js"),["./RadioOptionElement.801ff641.css"],import.meta.url).then(t=>t.default||t)),Ni=U(()=>z(()=>import("./RadioImageOptionElement.559ca470.js"),["./TextBoxListElement.b602ad61.css"],import.meta.url).then(t=>t.default||t)),xi=U(()=>z(()=>import("./CountryOptionElement.5d0721a5.js"),["./vue-multiselect.eb3eab67.css"],import.meta.url).then(t=>t.default||t)),Ri=U(()=>z(()=>import("./DateElement.29deca1b.js"),["./DatePick.6beced99.css","./DateElement.e9cd5c5f.css"],import.meta.url).then(t=>t.default||t)),$i=U(()=>z(()=>import("./StripePaymentElement.48ee3bc1.js"),[],import.meta.url).then(t=>t.default||t)),Bi=U(()=>z(()=>import("./AuthorizeNetPaymentElement.3fac85ec.js"),["./AuthorizeNetPaymentElement.5c161814.css"],import.meta.url).then(t=>t.default||t)),ji=U(()=>z(()=>import("./FormSurveyPayment.47298af6.js"),["./ghl-payment-element.29b93162.css","./TextElement.0b941f97.css","./TextBoxListElement.b602ad61.css","./OptionElement.05aaf420.css","./FormSurveyPayment.b06aff57.css","./vue-multiselect.eb3eab67.css","./app.5efdd9e1.css"],import.meta.url).then(t=>t.default||t)),Mi=U(()=>z(()=>import("./FileUploadElement.6e63c72b.js"),["./FileUploadElement.923d31a8.css"],import.meta.url).then(t=>t.default||t)),qi=U(()=>z(()=>import("./SignatureElement.3f2d3ca3.js"),["./SignatureElement.99ad4b71.css"],import.meta.url).then(t=>t.default||t)),Wi=U(()=>z(()=>import("./AddGuest.95456941.js"),["./AddGuest.79393527.css"],import.meta.url).then(t=>t.default||t)),Gi=U(()=>z(()=>import("./AddGuestOld.24e0f42e.js"),["./AddGuestOld.b3decca9.css"],import.meta.url).then(t=>t.default||t)),Hi=U(()=>z(()=>import("./Branding.ab9e2f8d.js"),[],import.meta.url).then(t=>t.default||t)),Ki=U(()=>z(()=>import("./OrderConfirmation.4fa856c5.js"),["./OrderConfirmation.e98c5326.css"],import.meta.url).then(t=>t.default||t)),Ji=U(()=>z(()=>import("./ThanksMessage.43df7498.js"),["./ThanksMessage.37e050aa.css"],import.meta.url).then(t=>t.default||t)),Qi=U(()=>z(()=>import("./CalendarPaymentPage.7307b0aa.js").then(t=>t.a),["./ghl-payment-element.29b93162.css","./CalendarPaymentPage.e899b92c.css"],import.meta.url).then(t=>t.default||t)),Yi={ref:"hl-app",class:"hl-app"},Zi={key:0},Xi={key:0,class:"col-sm-12 col-12"},es={class:"loader-container"},Is=xa({__name:"FormComponent",props:{formId:{type:String,default:void 0},formData:{type:Object||Array,required:!0},calendar:{type:Object,default:void 0},selectedSlot:{type:Object,default:void 0},timezone:{type:String,default:void 0},event:{type:Object,default:void 0},error:{type:String,default:void 0},redirect:{type:Boolean,default:!0},funnelPreview:{type:Boolean,default:!1},formElementClass:{type:String,required:!1},calendarEventId:{type:String,required:!1},forCalendarV3:{type:Boolean,default:!1},pageUrl:{type:String,default:void 0},baseReferrrer:{type:String,default:void 0},urlParams:{type:Object,default:void 0},stickyContactData:{type:Object,default:void 0},stickyContactFingerprint:{type:String,default:void 0},iFrameId:{type:String,default:void 0},guests:{type:Array,default:[]},guestCountDetail:{type:Object,default:{}},seatsPerSlotData:{type:Object,default:{availableSeats:0,enableGuestSeating:!1}},calendarConfirmationButtonText:{type:String,default:void 0},isNewCalendarWidgetEnabled:{type:Boolean,default:!1},formSubmissionInstruction:{type:Object,default:{onlySubmitForm:!1,isRecurring:!1,shouldPayUsingPaymentElement:!1}},meetingLocationId:{type:String,default:void 0},bookerMeetingLocation:{type:String,default:void 0},calendarServiceHelper:{type:Object,default:{}},locale:{type:String,default:"en"}},emits:["step","processError","disableBackOnSubmit","onSubmit","onFormSubmitCallback","onProcessCalendarPayment"],async setup(t,{emit:i}){var Qo;let m,T;const a=t;ot.extend(wn),ot.extend(Pn),ot.extend(Tn);const{t:W}=Ra(),w=Or(),F=$a();let se={},qe={},We={},ge=p(!0),Re={},$e=p(!1),v=p([]),Be={},N={},me={},Et=p(""),rt=p(!1),j=p(!0),Wt={},wt=p(!1),Pt={},Tt={},je=p(!1),V=p(""),fe=p(!1),Gt=p("US"),kt=p(),Ge=p("");p("");let At=p(""),Wr=p([]),He=p(!1);const So=p("");let Ht=p(),Pe=p({}),Kt=p(!0),ke=p(""),Ae=p(),Ot=p(),Jt=p(),Qt=p(),$=p(),Te=p(),at=p(),Gr={},Yt=p(),A=p([]),Zt=p(!1),Ke=p(""),Je=p("");const Eo=p(!1),Xt=p(""),nt=p(),e=Ba({phoneCountryIncluded:se,phoneCountryCode:We,formattedPhone:qe,form:Re,formStyle:Be,buttonStyle:N,company:Wt,formFieldsValue:Pt,validationError:Tt,fieldStyle:me,errors:Gr}),eo=p(),to=p(),oo=p(),Vt=p(),ro=p({}),wo=p(),Qe=p(),lt=p(),ao=p(),it=p(),st=p(),be=p({paymentType:we.DONATION,orderId:void 0}),ut=p(!1),dt=p([]),Dt=p({}),Po=p(),ct=p(!!(F.query.payment_intent||F.query.setup_intent)),To=p(),{getFormStyle:Hr,setFormStyle:Kr,getFormWidth:no}=an(),{authorizeNetDispatchData:Jr,setAuthorizeNetErrorResponse:lo,authorizeNetErrorResponse:Qr,authorizeNetCardNumberError:ko,authorizeNetCardExpiryError:Ao,authorizeNetCardCVCError:Oo,setAuthorizeNetCardNumberError:Vo,setAuthorizeNetExpiryError:Do,setAuthorizeNetCVCError:Lo,clearAuthorizeNetNewCardFormErrors:Yr}=on(),io=p(null),Zr={bgColor:"E9ECEFFF",labelColor:((Qo=e==null?void 0:e.fieldStyle)==null?void 0:Qo.labelColor)||"",placeholderColor:"",border:"",width:"",padding:{top:15,bottom:15,left:20,right:20},shadow:""},Xr=o=>{var n,l;it.value=o,e.formFieldsValue.payment=((l=(n=e.form)==null?void 0:n.payment)==null?void 0:l.currency.symbol)+o},ea=o=>{be.value.orderId=o._id,be.value.paymentType=we.PRODUCT,be.value.amount=o.amount,be.value.currency=o.currency},ta=o=>{e.formFieldsValue.emailVerified=o},Uo=o=>{e.formFieldsValue.phoneVerified=o},oa=()=>{if(a.calendar&&e.form.fullScreenMode)return{padding:"20px !important"};if(e.form.fullScreenMode)return{padding:"0px !important"}},ra=(o,n)=>e.form.layout===Me.ONE_COLUMN?"col-12":(e.form.layout===Me.TWO_COLUMN||e.form.layout===!0)&&!uo(o.type)&&zt(n)?Ye.value.mobileDevice?"menu-field-wrap col-sm-6 col-6":o.fieldWidthPercentage?"menu-field-wrap":"menu-field-wrap col-sm-6 col-6":e.form.layout===Me.SINGLE_LINE?"menu-field-wrap col-12":"col-12",aa=(o,n)=>{const l=na(o);return e.form.layout===Me.SINGLE_LINE&&!uo(o.type,!0)?{width:Ye.value.mobileDevice?"100%":o.fieldWidthPercentage+"%",marginBottom:l}:e.form.layout!==Me.SINGLE_LINE&&!uo(o.type,!1)?{width:o.fieldWidthPercentage+"%",flex:Ye.value.mobileDevice?"0 0 100%":`0 0 ${o.fieldWidthPercentage}%`,marginBottom:l}:{marginBottom:l}},na=o=>{var n,l;return o.hidden?0:(l=(n=e.form)==null?void 0:n.style)!=null&&l.hasOwnProperty("fieldSpacing")?e.form.style.fieldSpacing+"px":"16px"},so=o=>{A.value.push(o)},la=o=>o?"@import url('https://fonts.bunny.net/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');":"@import url('https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');",ia=async()=>{var _,x,P,D,f,I,k,re,H,Q,ae,ue,R,O,Y,ee,te,ne,q,g,b,Z,de,oe,G,Ie,le,Fe,pe,ye,Oe,Ve,De,Le,Ue,c,C,s,E,K,ce,J,X,Se,ze,Ne,xe,ve,pt,yt,vt,_t,ht,gt,bt,Ct,It,y,Yo,Zo,Xo,er,tr,or,rr,ar,nr,lr,ir;const{locationId:o,form:n,country:l}=a.formData;if(!o||!n)return;e.form=Ar(n),At.value=(_=e.form)==null?void 0:_.fbPixelId,V.value=o,Gt.value=l,He.value="stickyContact"in e.form?(x=e.form)==null?void 0:x.stickyContact:!1,Po.value=la(e.form.isGDPRCompliant);const u=a.formElementClass?`.${a.formElementClass}${_r}`:_r;if("layout"in e.form&&(rt.value=[!0,Me.TWO_COLUMN,Me.SINGLE_LINE].includes((P=e.form)==null?void 0:P.layout)),"fields"in e.form&&(v.value=[...(D=e.form)==null?void 0:D.fields]),"style"in e.form){Kr((f=e==null?void 0:e.form)==null?void 0:f.style,(I=e==null?void 0:e.form)==null?void 0:I.width),nt.value=(re=(k=a==null?void 0:a.formData)==null?void 0:k.form)==null?void 0:re.fieldCSS,nt.value&&!yo()&&a.formElementClass&&(nt.value=nt.value.replace(/#_builder-form/g,`.${a.formElementClass} #_builder-form`)),wt.value=((Q=(H=e.form)==null?void 0:H.style)==null?void 0:Q.ac_branding)??((ue=(ae=e.form)==null?void 0:ae.style)==null?void 0:ue.acBranding);const ie=(O=(R=e.form)==null?void 0:R.style)==null?void 0:O.bgImage;ie&&(So.value=`${a.funnelPreview?`.${a.formElementClass} #form-builder`:"body"} {background-image: url('${ie}');
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: top center}`)}((te=(ee=(Y=e.form.formAction)==null?void 0:Y.headerImageSrc)==null?void 0:ee.trim())==null?void 0:te.length)>0&&(Xt.value=e.form.formAction.headerImageSrc),"button"in e.form&&(e.buttonStyle={bgColor:(q=(ne=e.form)==null?void 0:ne.button)==null?void 0:q.background,color:(b=(g=e.form)==null?void 0:g.button)==null?void 0:b.color,border:((oe=(de=(Z=e.form)==null?void 0:Z.button)==null?void 0:de.border)==null?void 0:oe.border)||0,borderColor:((le=(Ie=(G=e.form)==null?void 0:G.button)==null?void 0:Ie.border)==null?void 0:le.color)||Fn,radius:(ye=(pe=(Fe=e.form)==null?void 0:Fe.button)==null?void 0:pe.border)==null?void 0:ye.radius,padding:(De=(Ve=(Oe=e.form)==null?void 0:Oe.button)==null?void 0:Ve.border)==null?void 0:De.padding}),(Ue=(Le=e.form)==null?void 0:Le.style)!=null&&Ue.color&&(Ht.value=`${u}label{ color:#${(C=(c=e.form)==null?void 0:c.style)==null?void 0:C.color} }`),(E=(s=e.form)==null?void 0:s.fieldStyle)!=null&&E.labelColor&&(Ht.value=`${u}label{ color:#${e.form.fieldStyle.labelColor} }`),"fieldStyle"in e.form?e.fieldStyle={bgColor:(ce=(K=e==null?void 0:e.form)==null?void 0:K.fieldStyle)==null?void 0:ce.bgColor,labelColor:(X=(J=e==null?void 0:e.form)==null?void 0:J.fieldStyle)==null?void 0:X.labelColor,labelFontFamily:(ze=(Se=e==null?void 0:e.form)==null?void 0:Se.fieldStyle)==null?void 0:ze.labelFontFamily,placeholderColor:(xe=(Ne=e==null?void 0:e.form)==null?void 0:Ne.fieldStyle)==null?void 0:xe.placeholderColor,border:(pt=(ve=e==null?void 0:e.form)==null?void 0:ve.fieldStyle)==null?void 0:pt.border,width:(vt=(yt=e==null?void 0:e.form)==null?void 0:yt.fieldStyle)==null?void 0:vt.width,padding:(ht=(_t=e==null?void 0:e.form)==null?void 0:_t.fieldStyle)==null?void 0:ht.padding,shadow:(bt=(gt=e==null?void 0:e.form)==null?void 0:gt.fieldStyle)==null?void 0:bt.shadow}:e.fieldStyle=Zr,"customStyle"in e.form&&((It=(Ct=e.form)==null?void 0:Ct.customStyle)==null?void 0:It.length)>0&&(Et.value=e.form.customStyle.replace(".form-element","")),"company"in e.form&&(e.company=(y=e.form)==null?void 0:y.company),"formLabelVisible"in e.form&&(j.value=(Yo=e.form)==null?void 0:Yo.formLabelVisible);let d=a.calendar||(Zo=e.form)==null?void 0:Zo.payment;if(!d&&(Xo=a.calendar)!=null&&Xo.stripe&&(((tr=(er=a.calendar)==null?void 0:er.stripe)==null?void 0:tr.amount)==0||(rr=(or=a.calendar)==null?void 0:or.stripe)!=null&&rr.currency)){const ie={...a.calendar.stripe};ie.amount=ie!=null&&ie.hasOwnProperty("deposit")?br(ie):ie==null?void 0:ie.amount,delete ie.deposit,delete ie.depositType,d=ie}d&&(Ae.value={default_payment_provider:d.paymentProvider,publishable_key:d.publishable_key,account_id:d.account_id,amount:(parseFloat(d.amount)*100).toFixed(2),name:d.amount?"Pay to processed":"Verify your card",description:d.charge_description,currency:d.currency}),ge.value=!1,((nr=(ar=e.form)==null?void 0:ar.payment)==null?void 0:nr.paymentType)==="product"&&((ir=(lr=e.form)==null?void 0:lr.payment)==null?void 0:ir.products.length)>0&&await sa()},Ye=pn(),{$bus:Ze}=Qa(),Ce=p([]),Lt=p([]),zo=p(!1),sa=async()=>{const o=e.form.payment.products.map(l=>l.productId),n=await go.getPublicProducts({locationId:a.formData.locationId,productIds:o,includeNonStoreProducts:!0});zo.value=!0,Lt.value=e.form.payment.products.map(l=>{let u={};return n.products.forEach(d=>{l.productId===d._id&&(u=d)}),u={...u,...l,quantity:1},u}).filter(l=>l._id!==void 0)};[m,T]=ja(()=>ia()),await m,T();const No=_e(()=>v.value.find(o=>o.type==="submit")),xo=_e(()=>a.calendar&&a.calendar.enable_guests),Ro=_e(()=>a.calendar&&a.calendar.enable_guests&&a.calendar.guest_type==="count_only"),$o=_e(()=>{var o;return((o=Ae.value)==null?void 0:o.default_payment_provider)==="stripe"}),Bo=_e(()=>{var o;return((o=Ae.value)==null?void 0:o.default_payment_provider)==="authorize-net"}),ua=_e(()=>Sn.find(o=>o.code===Gt.value)),jo=_e(()=>kt.value||Gt.value),da=_e(()=>Object.values(_o)),ft=_e(()=>{var o,n,l,u,d;return((o=a==null?void 0:a.calendar)==null?void 0:o.calendar_type)==="round_robin"&&((l=(n=a==null?void 0:a.calendar)==null?void 0:n.team_members)==null?void 0:l.length)===1?a==null?void 0:a.calendar.team_members[0].location_configurations:((u=a==null?void 0:a.calendar)==null?void 0:u.calendar_type)==="event"?(d=a==null?void 0:a.calendar)==null?void 0:d.location_configurations:null}),ca=(o,n)=>{Ke.value=o,n&&(Je.value=n)};_e(()=>e.formStyle.border==="0"?"form-top-padding":"");const fa=(o,n)=>{var l;ut.value=o.length>0,dt.value=o,Dt.value=n,e.formFieldsValue.payment=(An((l=dt.value[0])==null?void 0:l.currency)||"$")+n.summary.total},ma=o=>{To.value=o},pa=_e(()=>{var o,n,l,u,d,_,x,P,D,f,I;return(n=(o=v.value.filter(k=>k.hiddenFieldQueryKey==="payment"))==null?void 0:o[0])!=null&&n.hidden?!1:((u=(l=e.form)==null?void 0:l.payment)==null?void 0:u.paymentType)===we.PRODUCT?((_=(d=e.form)==null?void 0:d.payment)==null?void 0:_.required)&&((D=(P=(x=e.form)==null?void 0:x.payment)==null?void 0:P.products)==null?void 0:D.length)||ut.value:((I=(f=e.form)==null?void 0:f.payment)==null?void 0:I.required)||it.value});Ma({__dangerouslyDisableSanitizers:["style"],style:[{children:So.value,type:"text/css"},{children:nt.value,type:"text/css"},{children:Ht.value,type:"text/css"},{children:Et.value,type:"text/css"},{children:Po.value,type:"text/css"}],meta:[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"viewport",content:"minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no"}]});let Mo=!1;setTimeout(()=>{St(a.urlParams,F,e.phoneCountryIncluded,$.value,e.formFieldsValue,v.value).then(o=>{e.phoneCountryIncluded=o.phoneCountryIncluded,e.formFieldsValue=o.formFieldsValue,$.value=o.formattedCountry,v.value=o.formFields})},yo()?1e3:100),v.value.forEach(o=>{if(o.type==="textbox_list"){const n={};o.picklistOptions.forEach(l=>{n[l.id]=l.prefillValue}),e.formFieldsValue[o.tag]=n}else o.type==="source"?e.formFieldsValue[o.tag]=o.value:o.type==="checkbox"&&!(e.formFieldsValue[o.tag]instanceof Array)?e.formFieldsValue[o.tag]=[]:o.type==="submit"&&(Mo=!0,a.calendar&&(o.label&&o.label.toLowerCase()==="button"||o.label.trim().length<=0)&&(o.label=a.calendarConfirmationButtonText?a.calendarConfirmationButtonText:W(a.forCalendarV3?"schedule_meeting":"book_appointment")))}),Mo||v.value.push({label:a.calendarConfirmationButtonText?a.calendarConfirmationButtonText:a.calendar?W(a.forCalendarV3?"schedule_meeting":"book_appointment"):W("submit"),tag:"button",palceholder:"button",type:"submit"}),v.value.length>0&&v.value.forEach((o,n)=>{if(o.type==="html"&&o&&"html"in o){const l=o.html.replace(/[‘’]/g,"'").replace(/[“”]/g,'"');Wr.value.push({scriptString:l,index:n})}}),ke.value=Math.random().toString(36).slice(2),a.urlParams&&St(a.urlParams,F,e.phoneCountryIncluded,$.value,e.formFieldsValue,v.value).then(o=>{e.phoneCountryIncluded=o.phoneCountryIncluded,e.formFieldsValue=o.formFieldsValue,$.value=o.formattedCountry,v.value=o.formFields,setTimeout(()=>co(),1e3)}),qa(async()=>{!a.funnelPreview&&At.value!==void 0&&At.value!==""&&Rt(()=>{En(At.value,e.form.pageViewEvent)}),za();const o=F.query.payment_intent,n=F.query.transactionId;o&&(ct.value=!0,await ur(o,a.formId||"",n)?await Jo():(sessionStorage.removeItem(`submissionResponse-${a.formId}`),sessionStorage.removeItem(`formOrderResponse-${a.formId}`)),ct.value=!1);const l=F.query.setup_intent;if(l&&(ct.value=!0,await ur(o,a.formId||"",n,l)?await Jo():(sessionStorage.removeItem(`submissionResponse-${a.formId}`),sessionStorage.removeItem(`formOrderResponse-${a.formId}`)),ct.value=!1),He.value&&(Ce.value=v.value.map(u=>u.tag),po(void 0,V.value,Ce.value,e.formFieldsValue,e.phoneCountryIncluded,$.value).then(u=>{u?(e.formFieldsValue=u.formFieldsValue,e.phoneCountryIncluded=u.phoneCountryIncluded,$.value=u.formattedCountry):console.warn("Data not found! skippping stickycontact fill")}).catch(u=>{console.error("Failed at fillDataFromCookie",u)})),F.query.hasOwnProperty("sticky_contact_help")&&F.query.sticky_contact_help==="true"&&(console.log("%c Sticky Contact data","color: black; font-weight: bold; background-color: white"),console.log("%c ===================","color: black; font-weight: bold; background-color: white"),console.log(JSON.parse(vo("_ud"))),console.log("%c ===================","color: black; font-weight: bold; background-color: white")),Rt(()=>{$e.value=!0}),a.calendar){if(a.locale!=="en"&&a.locale!=="en_US"){window.dayjs=ot;const u=gr(a.locale);await yn(`unpkg.com/dayjs@1.8.21/locale/${u}.js`,()=>{ot.locale(u)})}Ze.$on("submitCalendarForm",xt)}a.calendar&&a.meetingLocationId&&(Ke.value=a.meetingLocationId,a.bookerMeetingLocation&&(Je.value=a.bookerMeetingLocation)),a.stickyContactData&&He.value&&(Ce.value||(Ce.value=v.value.map(u=>u.tag)),po(a.stickyContactData,V.value,Ce.value,e.formFieldsValue,e.phoneCountryIncluded,$.value).then(u=>{e.formFieldsValue=u.formFieldsValue,e.phoneCountryIncluded=u.phoneCountryIncluded,$.value=u.formattedCountry}).catch(u=>{console.error("Failed at fillDataFromCookie at sticky contact",u)})),Zt.value=!0,setTimeout(()=>{co(),Ho(e.formFieldsValue),Eo.value=!0},100)}),Wa(()=>{A.value=[]}),mo(()=>a.urlParams,(o,n)=>{a.urlParams&&St(a.urlParams,F,e.phoneCountryIncluded,$.value,e.formFieldsValue,v.value).then(l=>{e.phoneCountryIncluded=l.phoneCountryIncluded,e.formFieldsValue=l.formFieldsValue,$.value=l.formattedCountry,v.value=l.formFields})}),mo(()=>a.stickyContactData,(o,n)=>{a.stickyContactData&&He.value&&(Ce.value||(Ce.value=v.value.map(l=>l.tag)),po(a.stickyContactData,V.value,Ce.value,e.formFieldsValue,e.phoneCountryIncluded,$.value).then(l=>{e.formFieldsValue=l.formFieldsValue,e.phoneCountryIncluded=l.phoneCountryIncluded,$.value=l.formattedCountry}).catch(l=>{console.error("Failed at fillDataFromCookie at sticky contact",l)}))}),mo(()=>e.formFieldsValue,()=>{Nt(e.formFieldsValue,!0),Ho(e.formFieldsValue)},{deep:!0});const qo=o=>{kt.value=o},ya=o=>{e.validationError=o},va=o=>{Ot.value=o},_a=o=>{Jt.value=o},ha=(o,n,l)=>{eo.value=o&&o.length?o.replace(/\s/g,""):null,n&&n.length&&n.includes("/")&&(n=n.split("/"),to.value=n[0],oo.value=n[1]),Vt.value=l},ga=o=>{Te.value=o},mt=o=>{const{tag:n,value:l}=o;e.formFieldsValue[n]=l},ba=o=>{$.value=o,Nt({...e.formFieldsValue,country:o},!0)},Ca=o=>{at.value=o},M=o=>{const{tag:n,error:l}=o;e.errors[n]=l,Ia(o),Wo()},Ia=o=>{const{tag:n,error:l}=o;if(n=="email"&&a.guests.length>=1){const u=[e.formFieldsValue[n]];a.guests.forEach(d=>{u.includes(d.email)?(d.emailError="Email IDs must be unique for guests.",d.invalidEmail=!0):(d.emailError="",d.invalidEmail=!1),u.push(d.email)})}},Fa=o=>{Yt.value=o},Sa=o=>{const{date:n,item:l}=o;e.formFieldsValue[l.tag]=n},Ut=o=>{const n=e.phoneCountryIncluded[o.tag],l=e.phoneCountryCode[o.tag];e.formFieldsValue[o.tag]=n,o.tag==="phone"&&(Ge.value=e.formFieldsValue[o.tag]);try{const u=window.libphonenumber.parsePhoneNumberFromString(n,l);o.tag==="phone"&&(Ge.value=u.isValid()?u.number:n),e.phoneCountryIncluded[o.tag]=u.isValid()?u.number:n,e.phoneCountryCode[o.tag]=u.country?u.country:l,e.formattedPhone[o.tag]=u.isValid()?u.formatNational():n}catch{e.phoneCountryIncluded[o.tag]=n,e.formattedPhone[o.tag]=n}},Ea=()=>{let o=!1,n=0;return v.value.map(l=>{l.type==="cascade_dropdown"&&l.required&&e.formFieldsValue[l.tag]===void 0?(Kt.value=!1,o=!0):e.formFieldsValue[l.tag]!==void 0&&l.type==="cascade_dropdown"&&(e.formFieldsValue[l.tag].forEach(function(d){for(const _ in d)d[_]===""&&n++}),n>0?(Kt.value=!1,o=!0):Kt.value=!0)}),o},wa=async()=>{const o=A.value.map(l=>{if(l!=null&&l.validate)return l.validate()});return await Promise.all(o),await Wo()},Pa=async()=>{let o=!1;const n=A.value.map(l=>{var u;((u=l==null?void 0:l.item)==null?void 0:u.type)==="captcha"&&(o=!0)});return await Promise.all(n),o},Wo=async()=>{const o=Object.values(e.errors);let n=!1;return await Promise.all(o.map(l=>{l&&(n=!0)})),n},zt=o=>{var l;return o===v.value.length-1||ho.indexOf((l=v.value[o+1])==null?void 0:l.type)>=0?Go(o):!0},Go=o=>Ta(o)%2===0,Ta=o=>{let n=0;for(let l=o;l>=0;l--)if(ho.indexOf(v.value[l].type)===-1)n+=1;else return n;return n},uo=(o,n=!1)=>n&&o==="submit"?!1:ho.indexOf(o)>=0,ka=o=>{e.formFieldsValue[o.tag]=""},Aa=o=>{const{item:n,event:l}=o;e.formFieldsValue[n.tag]=l.target.value},Oa=o=>{for(const n of v.value)if(n.hiddenFieldQueryKey===o&&(n.Id||n.id))return n.Id||n.id;return null},Nt=(o,n=!1)=>{var x,P,D,f,I,k,re,H,Q,ae,ue,R,O,Y,ee,te,ne,q;const l={...o};if($.value&&n&&(l.country=$.value),l!=null&&l.phone&&n){const g=(P=(x=window.libphonenumber)==null?void 0:x.parsePhoneNumberFromString(o.phone,e.phoneCountryCode.phone))==null?void 0:P.number;g&&(l.phone=g)}if(!((D=e.form)!=null&&D.conditionalLogic)||!((f=e.form.conditionalLogic)!=null&&f.length))return;const u=new Set,d=new Set,_=(k=(I=e.form)==null?void 0:I.conditionalLogic)==null?void 0:k.filter(g=>{var b,Z;return n?((b=g==null?void 0:g.outcome)==null?void 0:b.type)==="showHideFields":g.conditions!==null&&((Z=g==null?void 0:g.outcome)==null?void 0:Z.type)!=="showHideFields"});for(let g=0;g<_.length;g++){const b=_[g];let Z=b.conditionalOperation==="and";const de={...l};for(let oe=0;oe<b.conditions.length;oe++){let{selectedField:G,selectedOperation:Ie,inputValue:le}=b.conditions[oe];G==="country"&&!n&&_o[de[G]]&&(de[G]=_o[de[G]]);const Fe=Oa(G);Fe!==null&&(G=Fe);const pe=de[G],ye=Ci(Ie,typeof pe=="string"?pe.toLowerCase():pe,typeof le=="string"?le.toLowerCase():le);if(b.conditionalOperation==="and"&&!ye){Z=!1;break}if((b.conditionalOperation==="or"||b.conditionalOperation==="then")&&ye){Z=!0;break}}if(((re=b.outcome)==null?void 0:re.type)==="showHideFields"&&n&&Z){const{hideType:oe,value:G}=b.outcome;(Array.isArray(G)?G:[G]).forEach(le=>{oe.includes("Show")?u.add(le):oe.includes("Hide")&&d.add(le)})}if(Z){if(((H=b.outcome)==null?void 0:H.type)==="displayCustomMessage"||((Q=b.outcome)==null?void 0:Q.type)==="disqualifyLead"&&((ae=b.outcome)==null?void 0:ae.disqualifyAction)==="showCustomMessage"?(e.form.formAction.actionType="2",e.form.formAction.thankyouText=b.outcome.value):(((ue=b.outcome)==null?void 0:ue.type)==="redirectToUrl"||((R=b.outcome)==null?void 0:R.type)==="disqualifyLead"&&((O=b.outcome)==null?void 0:O.disqualifyAction)==="openUrl")&&(e.form.formAction.actionType="1",e.form.formAction.redirectUrl=b.outcome.value,e.form.formAction.redirect_url=b.outcome.value),((Y=b.outcome)==null?void 0:Y.type)==="disqualifyLead"&&(e.form.disqualified=!0),!n)break}else((te=(ee=e.form)==null?void 0:ee.payment)!=null&&te.required||it.value||ut.value)&&!((q=(ne=v.value)==null?void 0:ne.find(oe=>oe.hiddenFieldQueryKey==="payment"))!=null&&q.hidden)&&(e.form.formAction.actionType=a.formData.form.formAction.actionType,e.form.formAction.thankyouText=a.formData.form.formAction.thankyouText,e.form.formAction.redirectUrl=a.formData.form.formAction.redirectUrl,e.form.disqualified=void 0)}u.forEach(g=>d.delete(g)),io.value&&(v.value=io.value),v.value=v.value.map(g=>{if(u.has(g.hiddenFieldQueryKey)){const b=a.formData.form.fields.find(Z=>Z.hiddenFieldQueryKey===g.hiddenFieldQueryKey);return{...g,hidden:!1,hiddenFieldValue:(b==null?void 0:b.hiddenFieldValue)||"",required:(b==null?void 0:b.required)||!1}}else if(d.has(g.hiddenFieldQueryKey))return{...g,hidden:!0,required:!1};return g}),St(a.urlParams,F,e.phoneCountryIncluded,$.value,e.formFieldsValue,v.value,!0).then(g=>{e.phoneCountryIncluded=g.phoneCountryIncluded,e.formFieldsValue=g.formFieldsValue,$.value=g.formattedCountry,v.value=g.formFields})},Ho=o=>{nn(e.form,v.value,o).forEach(({hiddenFieldQueryKey:l,result:u})=>{e.formFieldsValue[l]=u})},co=()=>{var u,d;setTimeout(()=>Nt(e.formFieldsValue,!0),0);const o=(d=(u=e.form)==null?void 0:u.conditionalLogic)==null?void 0:d.filter(_=>{var x;return((x=_==null?void 0:_.outcome)==null?void 0:x.type)==="showHideFields"});let n=[],l=[];o&&(o.forEach(_=>{if(_.outcome.type==="showHideFields"){const{hideType:x,value:P}=_.outcome,D=Array.isArray(P)?P:[P];x.includes("Show")?(n=[...new Set([...n,...D])],l=l.filter(f=>!D.includes(f))):x.includes("Hide")&&(l=[...new Set([...l,...D])],n=n.filter(f=>!D.includes(f)))}}),v.value.forEach(_=>{n.includes(_.hiddenFieldQueryKey)?(_.hidden=!0,_.required=!1,_.hiddenFieldValue=""):l.includes(_.hiddenFieldQueryKey)&&(_.hidden=!1,_.hiddenFieldValue="")}),io.value=Ar(v.value))},Va=async()=>(await sn(e.formFieldsValue,$.value),(await un(F,v.value,e.formFieldsValue)).formFieldsValue),xt=async()=>{var _,x,P,D,f,I,k,re,H,Q,ae,ue;let o=a.formSubmissionInstruction;if(o.isRecurring=(o==null?void 0:o.isRecurring)??((_=a.calendar)==null?void 0:_.enable_recurring),Te.value)return;for(let R in e.phoneCountryIncluded)e.phoneCountryIncluded[R]&&Ut({tag:R});if(await ln(e.formFieldsValue)>vn){alert("The total size of the attached files cannot be more that 50MB");return}if(e.validationError={},console.log("captchaInputValue",at.value),await wa()||Ea())return;if(await Pa()&&(at.value===void 0||at.value==="0")){e.validationError.captcha="Invalid Captcha";return}let d;if(i("disableBackOnSubmit",{disable:!0}),fe.value=!0,Te.value="",!((P=(x=a.calendarServiceHelper)==null?void 0:x.state)!=null&&P.isFormFirst)&&!((f=(D=a.calendarServiceHelper)==null?void 0:D.state)!=null&&f.isCustomPaymentProvider)&&((k=(I=a.calendarServiceHelper)==null?void 0:I.state)!=null&&k.isPaymentEnabled)&&!await((re=a.calendarServiceHelper)==null?void 0:re.newCardPaymentElementRef.value.validatePayment()))return i("disableBackOnSubmit",{disable:!1}),fe.value=!1,!1;if(!(o!=null&&o.onlySubmitForm)&&!(o!=null&&o.shouldPayUsingPaymentElement)){if($o.value&&Ae.value&&!Qt.value){d={};try{const{client_secret:R}=await $fetch(w.public.serverBaseUrl+"/appointment/setup-intent",{method:"POST",body:{locationId:a.formData.locationId,calendarId:a.calendar.id}});if(!R)throw Te.value="Something went wrong while processing your payment, please try again.",new Error("clientSecret missing");let O,Y;if(e.formFieldsValue.first_name&&(Y=e.formFieldsValue.first_name.trim()),e.formFieldsValue.full_name&&(Y=e.formFieldsValue.full_name.trim()),O=await Ot.value.confirmCardSetup(R,{payment_method:{card:Jt.value,billing_details:Y?{name:Y}:{}}},{handleActions:!1}),O.error)throw Te.value=O.error.message,O.error;{const ee={...e.formFieldsValue};if(He.value){let q;if(typeof Storage<"u")try{q=vo(V.value)}catch{console.error("Failed to fetch contact from local storage")}q||(q=he(V.value).value||he("msgsndr_id").value),q&&(ee.contact_id=q)}Ge.value&&(ee.phone=Ge.value);const te={location_id:V.value,calendar_id:a.calendar.id,payment_method_id:O.setupIntent.payment_method,setup_intent_status:O.setupIntent.status,customer_data:ee},ne=await $fetch(w.public.serverBaseUrl+"/appointment/setup-stripe-customer-and-payment-intent",{method:"POST",body:te});if(ne.status==="requires_action"){const q=await Ot.value.handleCardAction(ne.client_secret);if(q.error)throw Te.value=q.error.message,q.error;d.payment_intent_id=q.paymentIntent.id}else d.payment_intent_id=ne.id;d.stripe_customer_id=ne.stripe_customer_id}}catch(R){return console.error(R),Te.value||(Te.value="Something went wrong while processing your payment, please try again."),i("disableBackOnSubmit",{disable:!1}),fe.value=!1,!1}}else if(Bo.value&&Ae.value){d={};let R=!1;if(eo.value||(Vo(!0),R=!0),(!to.value||!oo.value)&&(Do(!0),R=!0),Vt.value||(Lo(!0),R=!0),R||ko.value||Ao.value||Oo.value)return;lo(""),Yr();try{const{publishable_key:O,account_id:Y}=Ae.value,ee={authData:{clientKey:O,apiLoginID:Y},cardData:{cardNumber:eo.value,month:to.value,year:oo.value,cardCode:Vt.value}},te=await Jr(ee);d={opaqueData:te==null?void 0:te.opaqueData,cardCode:Vt.value}}catch(O){if(O.type==="authorizeNetServerError"){lo((ue=(ae=(Q=(H=O==null?void 0:O.response)==null?void 0:H.messages)==null?void 0:Q.message)==null?void 0:ae[0])==null?void 0:ue.text);return}lo((O==null?void 0:O.message)||"Something went wrong!")}}}e.formFieldsValue=await Va(),await La(d,o),i("disableBackOnSubmit",{disable:!0})},Da=o=>{const n={};for(const l in o)o.hasOwnProperty(l)&&(n[l.replace(/(\_\w)/g,function(u){return u[1].toUpperCase()})]=o[l]);return n},La=async(o,n)=>{var Q,ae,ue,R,O,Y,ee,te,ne,q,g,b,Z,de,oe,G,Ie,le,Fe,pe,ye,Oe,Ve,De,Le,Ue,c,C;const l=he("msgsndr_id").value;if(a.formId&&(e.formFieldsValue.formId=a.formId),e.formFieldsValue.location_id=V.value,Ge.value&&(e.formFieldsValue.phone=Ge.value),He.value){let s;if(a.stickyContactFingerprint&&(s=a.stickyContactFingerprint),!s&&typeof Storage<"u")try{s=vo("location_"+V.value)}catch{console.error("Failed to get contact from local storage")}s||(s=he(V.value).value||l),s&&(e.formFieldsValue.contact_id=s)}const u=F.query.contact_id||((Q=a.urlParams)==null?void 0:Q.contact_id);u&&(e.formFieldsValue.query_contact_id=u);const d=e.formFieldsValue;lt.value=null,(ae=a.calendar)!=null&&ae.form_submit_type?a.calendar.form_submit_type==="RedirectURL"&&(lt.value=a.calendar.form_submit_redirect_url||a.calendar.thank_you_url):((O=(R=(ue=a.calendar)==null?void 0:ue.thank_you_url)==null?void 0:R.trim())==null?void 0:O.length)>0&&(lt.value=(Y=a.calendar)==null?void 0:Y.thank_you_url),a.event?d.event_id=F.query.event_id:a.calendarEventId&&(d.event_id=a.calendarEventId),a.guests.length?d.guests=a.guests.map(({name:s,email:E})=>({name:s,email:E})):a.guestCountDetail.count&&(d.guestCount=a.guestCountDetail.count),a.calendar&&(d.calendar_id=a.calendar.id,n!=null&&n.onlySubmitForm||(d.selected_slot=(ee=a.selectedSlot)==null?void 0:ee.format(),d.selected_timezone=a.timezone,Ke.value&&(d.meeting_location_id=Ke.value),Je.value&&(d.booker_meeting_location=Je.value))),n!=null&&n.onlySubmitForm||(Qt.value?d.stripeToken=Qt.value:o&&(d.stripePaymentResult=o));const _=_n(d.locationId);_&&(d.sessionId=_),a.calendar&&Dn(a.calendar.id,d),Qe.value=hn(),d.eventData={...gn(a.pageUrl,a.baseReferrrer),fbEventId:Qe.value};let x=bn(d.locationId);if(x&&(d.sessionFingerprint=x),a.funnelPreview){let{domain:s,page_url:E}=F.query;s||(s=window.location.hostname,E=window.location.pathname),d.funneEventData={event_type:"optin",domain_name:s,page_url:E,funnel_id:Ye.value.funnelId,page_id:Ye.value.funnelPageId,funnel_step_id:Ye.value.stepId}}Yt.value&&(d.captchaToken=Yt.value);let P=w.public.REST_API_URLS+"/forms/submit";if(a.calendar){if(a.isNewCalendarWidgetEnabled){const s=a.formElementClass?"booking-"+a.formElementClass:"calendar-"+((te=a.calendar)==null?void 0:te.id),E=document.querySelector(`.${s}`);E&&E.scrollIntoView({behavior:"smooth"})}n.onlySubmitForm||(P=w.public.newBaseURL+"/appointment")}let D=new FormData,f={};Object.keys(d).forEach(async s=>{var E;if(d[s]instanceof File)D.append(s,d[s]);else if((E=d[s])!=null&&E.files){const K=Object.values(d[s].files);K.length&&await Promise.all(K.map(ce=>{D.append(s,ce)}))}else(d[s]||d[s]===0)&&(f[s]=d[s])}),F.query.user_id&&(f.user_id=F.query.user_id);const k=he("am_id").value,re=he("sam_id").value,H=he("am_fingerprint").value;if(k&&(f.amId=k),H&&(f.amFingerprint=H),re&&(f.samId=re),a.calendar){if(f.eventData.medium=cr.Calendar,f.eventData.mediumId=f==null?void 0:f.calendar_id,a.formId){let s=v.value.filter(E=>E.type==="date");f.dateFieldDetails=s}}else f.eventData.medium=cr.Form,f.eventData.mediumId=f==null?void 0:f.formId;if(e.form.isLeadGenVideo&&(f.internalSource={type:"hosted_video"}),e.form.enableTimezone!==!1&&(f.Timezone=`${Cn()} ${In()}`),st.value&&(f.submissionId=st.value),ro.value&&(f.paymentContactId=ro.value),(it.value||ut.value)&&(f.paymentStatus="Pending"),n!=null&&n.shouldPayUsingPaymentElement&&(f.payment_meta={status:"pending"}),(q=(ne=v.value)==null?void 0:ne.find(s=>s.hiddenFieldQueryKey==="payment"))!=null&&q.hidden&&(delete f.payment,delete f.paymentStatus,delete f.paymentContactId),n.onlySubmitForm&&(f.internalSource={type:"calendar",id:(g=a.calendar)==null?void 0:g.id},f.source=((b=a.calendar)==null?void 0:b.name)||((Z=a.calendar)==null?void 0:Z.id),f.calendar_name=(de=a.calendar)==null?void 0:de.name,(oe=a.calendar)!=null&&oe.stripe&&(((Ie=(G=a.calendar)==null?void 0:G.stripe)==null?void 0:Ie.amount)==0||(Fe=(le=a.calendar)==null?void 0:le.stripe)!=null&&Fe.currency))){const s={...a.calendar.stripe};f.payment=s!=null&&s.hasOwnProperty("deposit")?br(s):s==null?void 0:s.amount}if(i("onFormSubmitCallback",{meetingLocationId:Ke.value,bookerMeetingLocaion:Je.value}),n.onlySubmitForm||!(n!=null&&n.isRecurring))a.calendar||Nt(f),f.disqualified=e.form.disqualified,D.set("formData",JSON.stringify(f)),$fetch(P,{method:"POST",body:D}).then(async s=>{ao.value=s,ro.value=s.contactId,st.value=s.submissionId,sessionStorage.setItem(`submissionResponse-${a.formId}`,JSON.stringify(ao.value)),sessionStorage.setItem(`formData-${a.formId}`,JSON.stringify({phoneCountryIncluded:e.phoneCountryIncluded,formattedCountry:$.value,formFieldsValue:e.formFieldsValue,formFields:v.value,productPurchased:be.value,productPurchasedList:dt.value,productSummary:Dt.value,submissionId:st.value})),!a.calendar&&pa.value?await wo.value.processPayment(s.contactId,s.fingerprint):(await fo(s),n.onlySubmitForm||(s.formData=f),i("onFormSubmitCallback",{formSubmissionData:s}))}).catch(s=>{var E,K,ce,J,X,Se,ze,Ne,xe;if(fe.value=!1,console.error("error",s),i("onFormSubmitCallback",{loadingScreen:{showLoadingScreen:!1}}),a.calendar){let ve="";((E=s==null?void 0:s.response)==null?void 0:E.status)===502?ve=((ce=(K=s==null?void 0:s.response)==null?void 0:K._data)==null?void 0:ce.msg)||((X=(J=s==null?void 0:s.response)==null?void 0:J.data)==null?void 0:X.msg)||"Something went wrong with your payment. Please try again.":(ve=((ze=(Se=s==null?void 0:s.response)==null?void 0:Se._data)==null?void 0:ze.msg)||((xe=(Ne=s==null?void 0:s.response)==null?void 0:Ne.data)==null?void 0:xe.msg)||W("unable_to_schedule_appointment"),ve=ve||"unable_to_schedule_appointment"),i("processError",{error:ve})}});else try{f.source="booking_widget",f.channel="private_api";const s=await kn.createRecurringEvents(Da(f));if(s.ids&&s.ids.length){let E,K=s.fingerprint,ce=s.sessionFingerprint,J={};try{a.calendar&&(E=e.formFieldsValue,K=s.contactId);const X="_ud";J=await fr(s.contact,!0),a.calendar&&(J={...J,appointment:s.appointment}),$t(X,JSON.stringify(J)),$t("location_"+V.value,K),window.parent.postMessage(["set-sticky-contacts",X,JSON.stringify(J),V.value,K],"*"),window.parent.postMessage(["set-sticky-contacts",`embedded_iframe_${a.iFrameId}`,a.iFrameId,V.value,K],"*"),a.event||(mr({sessionId:s.sessionId||null,locationId:V.value}),ce&&pr(V.value,ce)),i("onSubmit",{fingerprint:K})}catch(X){const Se={formData:E||s,eventId:s.ids.join(","),error:X.stack,isUserSessionLoad:window.userSessionAttribution,logs:window.ConsoleSubscriber?window.ConsoleSubscriber.getErrors():[]};await $fetch(w.public.serverBaseUrl+"/appointment/booking-error",{method:"POST",body:Se})}if(a.calendar||Rt(()=>{hr("track",e.form.formSubmissionEvent,Qe.value)}),a.calendar){const X={contactId:s.contactId,calendarThankYouUrl:lt.value,ids:s.ids,fingerprint:K,event_address:s.eventAddress||"",cookiePayload:J,fbEventId:Qe.value};i("step",X);return}if(a.redirect===!1)return;if("formAction"in e.form&&parseInt(e.form.formAction.actionType)===1)window.top.location.href=Bt(e.form.formAction.redirect_url||e.form.formAction.redirectUrl,J);else if("redirect_url"in e.form&&e.form.redirect_url!==""||"redirectUrl"in e.form&&e.form.redirectUrl!=="")window.top.location.href=Bt(e.form.redirect_url||e.form.redirectUrl,J);else{je.value=!0;const X=e.form.formAction.thankyouText?yr(e.form.formAction.thankyouText,J):"Thanks for submiting details, Will get back to you soon!";Pe.value={action:"submit-form",message:X,style:e.form.submitMessageStyle,isFormPosted:je.value,height:(ye=(pe=a.formData)==null?void 0:pe.form)==null?void 0:ye.height},e.form.isLeadGenVideo&&Ze.$emit("video-lead-popup-submitted",e.form.videoId)}e.form.isLeadGenVideo&&Ze.$emit("video-lead-popup-submitted",e.form.videoId)}}catch(s){if(console.error("error",s),a.calendar){let E="";((Oe=s==null?void 0:s.response)==null?void 0:Oe.status)===502?E=((De=(Ve=s==null?void 0:s.response)==null?void 0:Ve.data)==null?void 0:De.msg)||"Something went wrong with your payment. Please try again.":(E=((Ue=(Le=s==null?void 0:s.response)==null?void 0:Le.data)==null?void 0:Ue.msg)||W("unable_to_schedule_appointment"),E=((C=(c=s==null?void 0:s.response)==null?void 0:c.data)==null?void 0:C.msg)||"unable_to_schedule_appointment"),i("processError",{error:E})}}},fo=async o=>{var l,u,d,_;const n=he("msgsndr_id").value;if(o.status||o.id){let x=o.formData,P=o.fingerprint,D=o.sessionFingerprint,f={};if(n!==P){const I=he("msgsndr_id",{path:"/",maxAge:31536e3});I.value=P}try{a.calendar&&(x=e.formFieldsValue,P=o.contactId);const I="_ud";if(f=await fr(o.contact,!0),a.calendar){const k=o==null?void 0:o.appointment,re=gr(a.locale),H=(Q,ae)=>ot(Q).locale(re).format(ae);if(k){const Q={...k,only_end_date:H(k.only_end_date,"dddd, ll"),only_start_date:H(k.only_start_date,"dddd, ll"),start_time:H(k.start_time,"llll"),end_time:H(k.end_time,"llll")};f={...f,appointment:Q}}}$t(I,JSON.stringify(f)),$t("location_"+V.value,P),window.parent.postMessage(["set-sticky-contacts",I,JSON.stringify(f),V.value,P],"*"),window.parent.postMessage(["set-sticky-contacts",`embedded_iframe_${a.iFrameId}`,a.iFrameId,V.value,P],"*"),a.event||(mr({sessionId:o.sessionId||null,locationId:V.value}),D&&pr(V.value,D)),i("onSubmit",{fingerprint:P})}catch(I){const k={formData:x||o,eventId:o.id,error:I.stack,isUserSessionLoad:window.userSessionAttribution,logs:window.ConsoleSubscriber?window.ConsoleSubscriber.getErrors():[]};await $fetch(w.public.serverBaseUrl+"/appointment/booking-error",{method:"POST",body:k})}if(a.calendar||Rt(()=>{hr("track",e.form.formSubmissionEvent,Qe.value)}),a.calendar){const I={contactId:o.contactId,calendarThankYouUrl:lt.value,id:o.id,fingerprint:P,event_address:o.event_address,cookiePayload:f,fbEventId:Qe.value};i("step",I);return}if(a.redirect===!1)return;if("formAction"in e.form&&parseInt(e.form.formAction.actionType)===1&&!e.form.isLeadGenVideo){const I=Bt(e.form.formAction.redirect_url||e.form.formAction.redirectUrl,f);vr(I)}else if(("redirect_url"in e.form&&e.form.redirect_url!==""||"redirectUrl"in e.form&&e.form.redirectUrl!=="")&&!e.form.isLeadGenVideo){const I=Bt(e.form.redirect_url||e.form.redirectUrl,f);vr(I)}else if("formAction"in e.form&&parseInt((u=(l=e==null?void 0:e.form)==null?void 0:l.formAction)==null?void 0:u.actionType)==3&&be.value.orderId)je.value=!0,Pe.value={action:"order",style:{width:e.form.width,style:e.form.style,fieldStyle:e.form.fieldStyle},productPurchased:dt.value.map(I=>(Lt.value.forEach(k=>{k._id===I.productId&&(I.showImage=k.showImage,I.showDescription=k.showDescription)}),I)),orderId:be.value.orderId,productSummary:Dt.value,couponCode:To.value,contact:o.contact};else{je.value=!0;const I=e.form.formAction.thankyouText?yr(e.form.formAction.thankyouText,f):"Thanks for submiting details, Will get back to you soon!";Pe.value={action:"submit-form",message:I,style:e.form.submitMessageStyle,isFormPosted:je.value,height:(_=(d=a.formData)==null?void 0:d.form)==null?void 0:_.height},e.form.isLeadGenVideo&&Ze.$emit("video-lead-popup-submitted",e.form.videoId)}e.form.isLeadGenVideo&&Ze.$emit("video-lead-popup-submitted",e.form.videoId)}},Ua=async o=>{var n,l,u;if(o.type==="error")o.message&&(e.form.payment.required||it.value||ut.value)&&(fe.value=!1,M({tag:"payment",error:o.message}));else if(o.type==="success"){sessionStorage.removeItem(`formOrderResponse-${a.formId}`);const d={submissionId:st.value,orderId:be.value.orderId,paymentType:((n=be.value)==null?void 0:n.paymentType)===we.PRODUCT?we.PRODUCT:we.DONATION,locationId:V.value,formId:a.formId,transactionId:["authorize-net","nmi"].includes(o.provider)?(l=o.data)==null?void 0:l.transactionId:(u=o.data.data)==null?void 0:u.transactionId};await Ko(d,ao.value)}},Ko=async(o,n)=>{try{await Si.patchSubmission(o),fo(n)}catch(l){console.log(l),fo(n)}},Jo=async()=>{var l;const o=sessionStorage.getItem(`formData-${a.formId}`);if(o){const u=JSON.parse(o);St(a.urlParams,F,u.phoneCountryIncluded,u.formattedCountry,u.formFieldsValue,u.formFields).then(d=>{e.phoneCountryIncluded=d.phoneCountryIncluded,e.formFieldsValue=d.formFieldsValue,$.value=d.formattedCountry,v.value=d.formFields,setTimeout(()=>co(),1e3)})}const n=sessionStorage.getItem(`submissionResponse-${a.formId}`);if(o&&n){const u=JSON.parse(o),d=JSON.parse(n),_={submissionId:u.submissionId,orderId:u.productPurchased.orderId,paymentType:((l=u.productPurchased)==null?void 0:l.paymentType)===we.PRODUCT?we.PRODUCT:we.DONATION,locationId:V.value,formId:a.formId,transactionId:F.query.transactionId||"51651414"};be.value=u.productPurchased,dt.value=u.productPurchasedList,Dt.value=u.productSummary,await Ko(_,d)}},za=()=>{a.calendar&&(Ce.value=v.value.map(o=>o.tag),setTimeout(()=>{Ln(a.calendar.id,Ce.value,e.formFieldsValue,e.phoneCountryIncluded,$.value).then(o=>{if(o){e.formFieldsValue=o.formFieldsValue,e.phoneCountryIncluded=o.phoneCountryIncluded,$.value=o.formattedCountry;for(let n in e.phoneCountryIncluded)e.phoneCountryIncluded[n]&&Ut({tag:n})}else console.warn("session data not found! skipping contact fill")}).catch(o=>{console.error("Failed at loadDataFromSessionStorage",o)})},yo()?1005:100))},Na=async o=>{o.type==="error"&&(o!=null&&o.message)&&(i("disableBackOnSubmit",{disable:!1}),fe.value=!1),i("onProcessCalendarPayment",o)};return Ga(()=>{Ze.$off("submitCalendarForm",xt)}),(o,n)=>{var ye,Oe,Ve,De,Le,Ue;const l=Ei,u=Ya,d=wi,_=Pi,x=Ti,P=ki,D=Za,f=Ai,I=Xa,k=Oi,re=en,H=Vi,Q=Di,ae=Li,ue=Ui,R=zi,O=Ni,Y=xi,ee=tn,te=Ri,ne=$i,q=Bi,g=ji,b=Mi,Z=qi,de=rn,oe=Wi,G=Gi,Ie=Hi,le=Ki,Fe=Ji,pe=Qi;return h(),Xe("div",Yi,[et("section",{id:"form-builder",class:Ft(["hl_form-builder--main",r(e).form.fullScreenMode?"hl_form-builder--main-full":""]),style:tt(oa())},[r(Xt).trim().length>0?(h(),Xe("div",Zi,[et("div",{class:"max-w-full ghl-banner w-full",style:tt({maxWidth:r(no)+"px"})},[sr(l,{url:r(Xt),width:r(no),alt:"banner"},null,8,["url","width"])],4)])):Ee("",!0),et("div",{style:tt({maxWidth:r(no)+"px",marginBottom:r(e).form.fullScreenMode?"0 !important":""}),class:"ghl-form-wrap"},[r(je)?Ee("",!0):(h(),Xe("div",{key:0,id:"_builder-form",style:tt(r(Hr)()),name:"builder-form",class:Ft(["form-builder--wrap",r(e).form.fullScreenMode?"form-builder--wrap-full":""])},[et("div",{class:Ft([r(rt)?"builder-inline":"flex-col",r(j)?"":"extra-top-padding","fields-container row"])},[(h(!0),Xe(Ha,null,Ka(r(v),(c,C)=>{var s,E,K,ce,J,X,Se,ze,Ne,xe,ve,pt,yt,vt,_t,ht,gt,bt,Ct,It;return h(),Xe("div",{key:C,style:tt(aa(c)),class:Ft([ra(c,C),r(rt)?"menu-field-wrap":"",{calendar_notes:c.tag==="calendar_notes"},{location_picker:c.tag==="locationConfiguration"},{"payment-block":c.type==="payment"}])},[et("div",{class:Ft([C%2==0?"f-even":"f-odd","form-field-container"])},[c.type==="text"?(h(),S(u,{key:0,kind:"form",item:r(B)(c),"form-label-visible":r(j),"phone-country-included":r(e).phoneCountryIncluded,"phone-country-code":r(e).phoneCountryCode,"location-country":r(jo),"form-fields-value":r(e).formFieldsValue,"formatted-phone":r(e).formattedPhone,"phone-country-derived":r(kt),errors:r(e).errors,"layout-type":r(e).form.layout,"check-full-width-position":zt(C),"font-size":(K=(E=(s=r(e))==null?void 0:s.form)==null?void 0:E.fieldStyle)==null?void 0:K.placeholderFontSize,locationId:(ce=a==null?void 0:a.formData)==null?void 0:ce.locationId,"medium-id":t.formId,onVerifyPhone:Uo,onUpdatePhoneCountryDerived:qo,onCustomFieldPhoneNumberUpdate:Ut,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","phone-country-included","phone-country-code","location-country","form-fields-value","formatted-phone","phone-country-derived","errors","layout-type","check-full-width-position","font-size","locationId","medium-id"])):c.type==="phone"?(h(),S(d,{key:1,kind:"form",item:r(B)(c),"form-label-visible":r(j),"phone-country-included":r(e).phoneCountryIncluded,"phone-country-code":r(e).phoneCountryCode,"location-country":r(jo),"form-fields-value":r(e).formFieldsValue,"phone-country-derived":r(kt),"formatted-phone":r(e).formattedPhone,errors:r(e).errors,"layout-type":r(e).form.layout,"check-full-width-position":zt(C),"font-size":(Se=(X=(J=r(e))==null?void 0:J.form)==null?void 0:X.fieldStyle)==null?void 0:Se.placeholderFontSize,locationId:(ze=a==null?void 0:a.formData)==null?void 0:ze.locationId,"medium-id":t.formId,onVerifyPhone:Uo,onAddOrUpdateError:M,onUpdatePhoneCountryDerived:qo,onCustomFieldPhoneNumberUpdate:Ut,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","phone-country-included","phone-country-code","location-country","form-fields-value","phone-country-derived","formatted-phone","errors","layout-type","check-full-width-position","font-size","locationId","medium-id"])):c.type==="number"||c.type==="numerical"||c.dataType==="SCORE"?(h(),S(_,{key:2,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,errors:r(e).errors,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors"])):c.type==="email"?(h(),S(x,{key:3,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,errors:r(e).errors,"layout-type":r(e).form.layout,"check-full-width-position":zt(C),"font-size":(ve=(xe=(Ne=r(e))==null?void 0:Ne.form)==null?void 0:xe.fieldStyle)==null?void 0:ve.placeholderFontSize,onAddOrUpdateError:M,onVerifyEmail:ta,locationId:(pt=a==null?void 0:a.formData)==null?void 0:pt.locationId,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors","layout-type","check-full-width-position","font-size","locationId"])):Ee("",!0),c.type==="h1"?(h(),S(P,{key:4,item:r(B)(c)},null,8,["item"])):c.type==="textbox_list"?(h(),S(D,{key:5,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,"local-tag-id":r(ke),errors:r(e).errors,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","local-tag-id","errors"])):(c==null?void 0:c.type)==="location_picker"&&r(ft)&&(((yt=r(ft))==null?void 0:yt.length)>1||((vt=r(ft))==null?void 0:vt.length)===1&&((ht=(_t=r(ft))==null?void 0:_t[0])==null?void 0:ht.kind)==="booker")&&t.isNewCalendarWidgetEnabled?(h(),S(f,{key:6,ref_for:!0,ref:y=>{r(A)[C]=y},kind:"form",data:{locationConfiguration:r(ft)},"form-fields-value":r(e).formFieldsValue,errors:r(e).errors,item:r(B)(c),onUpdateSelectedLocation:ca,onAddOrUpdateError:M,"default-value":r(Ke),"default-booker-location":r(Je)},null,8,["data","form-fields-value","errors","item","default-value","default-booker-location"])):c.type==="textarea"||c.type=="large_text"?(h(),S(I,{key:7,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,errors:r(e).errors,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors"])):c.type==="img"&&"url"in c?(h(),S(k,{key:8,kind:"form",item:r(B)(c),ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item"])):c.type==="html"&&r(Zt)&&r(Eo)?(h(),S(re,{key:9,item:r(B)(c),localTagId:r(ke)+C,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","localTagId"])):c.type==="captcha"?(h(),S(H,{key:10,kind:"form",item:r(B)(c),"form-label-visible":r(j),"captcha-input-value":r(at),"local-tag-id":r(ke),"validation-error":r(e).validationError,onUpdateValidationError:ya,onUpdateIsCaptchaVerified:Ca,onUpdateCaptchaToken:Fa,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","captcha-input-value","local-tag-id","validation-error"])):c.type==="monetory"?(h(),S(Q,{key:11,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,"locale-currency":r(ua),errors:r(e).errors,onAddOrUpdateError:M,onUpdateFormFieldsValue:mt,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","locale-currency","errors"])):c.type==="checkbox"?(h(),S(ae,{key:12,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,layout:r(e).form.layout,"local-tag-id":r(ke),errors:r(e).errors,onAddOrUpdateError:M,onUpdateFormFieldsValue:mt,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","layout","local-tag-id","errors"])):c.type==="terms_and_conditions"?(h(),S(ue,{key:13,kind:"form",item:r(B)(c),"form-label-visible":r(j),labelFontFamily:r(e).fieldStyle.labelFontFamily,"form-fields-value":r(e).formFieldsValue,"local-tag-id":r(ke),errors:r(e).errors,onAddOrUpdateError:M,onUpdateFormFieldsValue:mt,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","labelFontFamily","form-fields-value","local-tag-id","errors"])):c.type==="radio"&&c.picklistOptions?(h(),S(R,{key:14,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,"local-tag-id":r(ke),errors:r(e).errors,layout:r(e).form.layout,onAddOrUpdateError:M,onResetFieldsValue:ka,onSetRadioValue:Aa,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","local-tag-id","errors","layout"])):c.type==="radio"&&c.picklistOptionsImage?(h(),S(O,{key:15,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,layout:r(e).form.layout,"local-tag-id":r(ke),errors:r(e).errors,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","layout","local-tag-id","errors"])):c.type==="select"&&c.tag=="country"?(h(),S(Y,{key:16,kind:"form",item:r(B)(c),"form-label-visible":r(j),"formatted-country":r($),countries:r(da),errors:r(e).errors,onUpdateFormattedCountry:ba,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","formatted-country","countries","errors"])):c.type==="single_options"||c.type==="multiple_options"?(h(),S(ee,{key:17,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,errors:r(e).errors,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors"])):c.type==="date"?(h(),S(te,{key:18,kind:"form",item:r(B)(c),"form-label-visible":r(j),"form-fields-value":r(e).formFieldsValue,errors:r(e).errors,ref_for:!0,ref:y=>{r(A)[C]=y},onDateSelected:Sa,onAddOrUpdateError:M},null,8,["item","form-label-visible","form-fields-value","errors"])):c.type==="payment"&&r($o)?(h(),S(ne,{key:19,calendar:t.calendar,payment:r(Ae),stripe:r(Ot),card:r(Jt),"card-error-msg":r(Te),onUpdateStripe:va,onUpdateCard:_a,onUpdateCardErrorMsg:ga,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["calendar","payment","stripe","card","card-error-msg"])):c.type==="payment"&&r(Bo)&&r(Zt)?(h(),S(q,{key:20,kind:"form",calendar:t.calendar,payment:r(Ae),setAuthorizeNetNewCardDetails:ha,authorizeNetCardNumberError:r(ko),authorizeNetCardExpiryError:r(Ao),authorizeNetCardCVCError:r(Oo),setAuthorizeNetCardNumberError:r(Vo),setAuthorizeNetExpiryError:r(Do),setAuthorizeNetCVCError:r(Lo),authorizeNetErrorResponse:r(Qr)},null,8,["calendar","payment","authorizeNetCardNumberError","authorizeNetCardExpiryError","authorizeNetCardCVCError","setAuthorizeNetCardNumberError","setAuthorizeNetExpiryError","setAuthorizeNetCVCError","authorizeNetErrorResponse"])):!t.calendar&&c.type==="payment"&&(((bt=(gt=r(e).form)==null?void 0:gt.payment)==null?void 0:bt.paymentType)==="product"&&r(zo)&&r(Lt).length>0||((It=(Ct=r(e).form)==null?void 0:Ct.payment)==null?void 0:It.paymentType)!=="product")?(h(),S(g,{key:21,kind:"form",item:r(B)(c),payment:r(e).form.payment,products:r(Lt),style:tt(r(e).form.fieldStyle),"form-label-visible":r(j),locationId:r(V),"form-id":t.formId,isPaymentInProcessing:r(fe),"form-name":t.formData.name,errors:r(e).errors,onOnPaymentCallback:Ua,onAddOrUpdateError:M,onPaymentAmount:Xr,onProductOrder:ea,onOnOrderApiFail:n[0]||(n[0]=()=>Ja(fe)?fe.value=!1:fe=!1),onProductSelected:fa,onCouponCode:ma,ref_for:!0,ref:y=>{r(A)[C]=y,wo.value=y}},null,8,["item","payment","products","style","form-label-visible","locationId","form-id","isPaymentInProcessing","form-name","errors"])):c.type==="file_upload"?(h(),S(b,{key:22,kind:"form",item:r(B)(c),"form-fields-value":r(e).formFieldsValue,"form-label-visible":r(j),errors:r(e).errors,onUpdateFormFieldsValue:mt,onAddOrUpdateError:M,ref_for:!0,ref:y=>{r(A)[C]=y}},null,8,["item","form-fields-value","form-label-visible","errors"])):c.type==="signature"?(h(),S(Z,{key:23,kind:"form",item:r(B)(c),"form-fields-value":r(e).formFieldsValue,"form-label-visible":r(j),ref_for:!0,ref:y=>{r(A)[C]=y},errors:r(e).errors,onUpdateFormFieldsValue:mt,onAddOrUpdateError:M},null,8,["item","form-fields-value","form-label-visible","errors"])):c.type==="submit"&&!r(xo)?(h(),S(de,{key:24,item:r(B)(c),layout:r(e).form.layout,"form-label-visible":r(e).form.formLabelVisible,"button-style":r(e).buttonStyle,calendar:t.calendar,"form-submit-disable":r(fe),onClick:xt,ref_for:!0,ref:y=>{r(A)[C]=y},errors:r(e).errors},null,8,["item","layout","form-label-visible","button-style","calendar","form-submit-disable","errors"])):Ee("",!0)],2)],6)}),128)),r(xo)?(h(),Xe("div",Xi,[t.isNewCalendarWidgetEnabled?(h(),S(oe,{key:0,guests:t.guests,"guest-count-detail":t.guestCountDetail,"collect-guest-count":r(Ro),"seats-per-slot-data":a.seatsPerSlotData,"form-fields-value":r(e).formFieldsValue,ref:c=>so(c),onAddOrUpdateError:M},null,8,["guests","guest-count-detail","collect-guest-count","seats-per-slot-data","form-fields-value"])):(h(),S(G,{key:1,guests:t.guests,"guest-count-detail":t.guestCountDetail,"collect-guest-count":r(Ro),"seats-per-slot-data":a.seatsPerSlotData,"form-fields-value":r(e).formFieldsValue,ref:c=>so(c),onAddOrUpdateError:M},null,8,["guests","guest-count-detail","collect-guest-count","seats-per-slot-data","form-fields-value"])),r(No)?(h(),S(de,{key:2,item:r(No),"button-style":r(e).buttonStyle,calendar:t.calendar,"form-submit-disable":r(fe),onClick:xt,ref:c=>so(c),errors:r(e).errors,class:"menu-field-wrap col-sm-12 col-12 calendar_notes mt-20"},null,8,["item","button-style","calendar","form-submit-disable","errors"])):Ee("",!0)])):Ee("",!0)],2),t.formData!=null&&r(wt)?(h(),S(Ie,{key:0,company:r(e).company},null,8,["company"])):Ee("",!0)],6)),r(Pe)&&r(Pe).action==="order"?(h(),S(le,{key:1,id:"order-confirmation",payload:r(Pe)},null,8,["payload"])):Ee("",!0),r(Pe)&&r(Pe).action==="submit-form"?(h(),S(Fe,{key:2,id:"_builder-form",payload:r(Pe)},null,8,["payload"])):Ee("",!0),!((Oe=(ye=t.calendarServiceHelper)==null?void 0:ye.state)!=null&&Oe.isFormFirst)&&!((De=(Ve=t.calendarServiceHelper)==null?void 0:Ve.state)!=null&&De.isCustomPaymentProvider)&&((Ue=(Le=t.calendarServiceHelper)==null?void 0:Le.state)!=null&&Ue.isPaymentEnabled)?(h(),S(pe,{key:3,ref:t.calendarServiceHelper.newCardPaymentElementRef,state:t.calendarServiceHelper.state,showSessionExpire:!1,onOnPaymentCallback:Na},null,8,["state"])):Ee("",!0)],4)],6),et("div",es,[sr(On,{loading:r(ct),color:"#188bf6",size:"30px"},null,8,["loading"])])],512)}}});export{we as F,Is as _,bs as c,Cs as g};
