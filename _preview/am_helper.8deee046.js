import{P as d,A as a}from"./entry.819ce933.js";const u=()=>({version:"2021-04-15"}),g=e=>{const n=d();return $fetch.create({baseURL:e||n.public.REST_API_URLS,headers:u()})},A={ValidateAffiliateCampaign:e=>g()("/affiliate-manager/affiliate-campaign/validate",{body:e,method:"POST"})},p="am_fingerprint",_="am_id",v="sam_id",y=async(e,n,s,o)=>{try{let i="";i=window.location.href;const m={locationId:e,funnelId:n,amId:s,samId:o,fingerprint:a(p).value||"",accessUrl:i},t=await A.ValidateAffiliateCampaign(m);if(t.valid&&t.fingerprint&&t.timestamp){const{fingerprint:f,timestamp:r}=t,l=a(p,{expires:new Date(r),path:"/",samesite:"none"});if(s){const c=a(_,{expires:new Date(r),path:"/",samesite:"none"});l.value=f,c.value=s}else if(o){const c=a(v,{expires:new Date(r),path:"/",samesite:"none"});l.value=f,c.value=o}}}catch(i){console.error("Failed to add affiliate cookie!",i)}};export{y as s};
